:root{--bg-primary: #ffffff;--bg-secondary: #f5f5f7;--bg-tertiary: #e8e8ed;--text-primary: #1d1d1f;--text-secondary: #6e6e73;--text-tertiary: #86868b;--accent-blue: #007aff;--accent-blue-hover: #0051d5;--accent-green: #34c759;--accent-red: #ff3b30;--border-default: #d2d2d7;--border-light: #e5e5ea;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--spacing-2xl: 48px;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--font-size-xs: 12px;--font-size-sm: 14px;--font-size-base: 17px;--font-size-lg: 20px;--font-size-xl: 22px;--font-size-2xl: 28px;--font-size-3xl: 34px;--radius-sm: 8px;--radius-md: 12px;--radius-lg: 16px;--radius-xl: 20px;--shadow-sm: 0 1px 3px rgba(0, 0, 0, .1);--shadow-md: 0 4px 12px rgba(0, 0, 0, .1);--shadow-lg: 0 8px 24px rgba(0, 0, 0, .15)}.dark{--bg-primary: #000000;--bg-secondary: #1c1c1e;--bg-tertiary: #2c2c2e;--text-primary: #f5f5f7;--text-secondary: #98989d;--text-tertiary: #636366;--accent-blue: #0a84ff;--accent-blue-hover: #409cff;--accent-green: #30d158;--accent-red: #ff453a;--border-default: #38383a;--border-light: #48484a}*{box-sizing:border-box;margin:0;padding:0}body{font-family:var(--font-family);font-size:var(--font-size-base);color:var(--text-primary);background-color:var(--bg-primary);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:background-color .2s ease,color .2s ease}.app{min-height:100vh;display:flex;flex-direction:column;background-color:var(--bg-primary);transition:background-color .2s ease}.app-header{background-color:var(--bg-primary);flex-shrink:0}.app-header-content{padding:var(--spacing-xl) var(--spacing-lg);display:flex;align-items:center;position:relative}.app-header-left{position:absolute;left:var(--spacing-lg)}.app-header-center{position:absolute;left:50%;transform:translate(-50%)}.app-header-right{position:absolute;right:var(--spacing-lg);display:flex;align-items:center;gap:.75rem}.app-title,.app-project-name-header{font-size:var(--font-size-2xl);font-weight:600;color:var(--text-primary);margin:0}.app-subtitle{font-size:var(--font-size-xs);color:var(--text-secondary);margin-top:var(--spacing-xs)}.app-body{position:relative;flex:1;overflow:hidden}.app-main{position:absolute;left:calc(280px + var(--spacing-md) * 2);right:0;top:0;bottom:0;overflow-y:auto;padding:var(--spacing-xl) var(--spacing-lg);transition:left .2s cubic-bezier(.4,0,.2,1);transform:translateZ(0)}.app-body.sidebar-collapsed .app-main{left:calc(60px + var(--spacing-md) * 2)}.app-project-header{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-lg);margin-bottom:var(--spacing-xl);padding-bottom:var(--spacing-md)}.app-project-info-wrapper{flex:1;min-width:0;text-align:center}.app-project-name{font-size:var(--font-size-2xl);font-weight:600;color:var(--text-primary);margin:0}.app-project-info{font-size:var(--font-size-sm);color:var(--text-secondary);margin-top:var(--spacing-xs);margin-bottom:0}.app-section{margin-bottom:var(--spacing-xl)}.app-section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.app-section-title{font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary);margin:0 0 var(--spacing-md) 0}.app-section-hint{font-size:var(--font-size-sm);color:var(--text-secondary)}.app-empty{display:flex;align-items:center;justify-content:center;height:100%;color:var(--text-secondary);font-size:var(--font-size-base)}.header-icon-button{display:flex;align-items:center;justify-content:center;width:40px;height:40px;padding:0;background-color:var(--bg-secondary);border:1px solid var(--border-light);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all .2s ease;flex-shrink:0}.header-icon-button:hover{background-color:var(--bg-tertiary);border-color:var(--border-default);color:var(--text-primary);transform:translateY(-1px)}.sidebar{position:absolute;left:var(--spacing-md);top:var(--spacing-md);bottom:var(--spacing-md);width:280px;background-color:var(--bg-secondary);border:1px solid var(--border-light);border-radius:var(--radius-xl);display:flex;flex-direction:column;transition:width .2s cubic-bezier(.4,0,.2,1);z-index:100;box-shadow:0 4px 12px #00000014;overflow:hidden;transform:translateZ(0)}.sidebar.collapsed{width:60px}.sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md);border-bottom:1px solid var(--border-light)}.sidebar-title{font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary);margin:0}.sidebar-toggle{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:var(--radius-sm);background-color:transparent;border:none;color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.sidebar-toggle:hover{background-color:var(--bg-tertiary);color:var(--text-primary)}.sidebar-toggle-icon{width:20px;height:20px}.sidebar-content{flex:1;overflow-y:auto;padding:var(--spacing-md)}.sidebar-content::-webkit-scrollbar{width:8px}.sidebar-content::-webkit-scrollbar-track{background-color:transparent}.sidebar-content::-webkit-scrollbar-thumb{background-color:var(--border-default);border-radius:4px;transition:background-color .2s ease}.sidebar-content::-webkit-scrollbar-thumb:hover{background-color:var(--text-secondary)}.sidebar-content{scrollbar-width:thin;scrollbar-color:var(--border-default) transparent}.sidebar-add-button{width:100%;display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background-color:var(--accent-blue);color:#fff;border:none;border-radius:var(--radius-md);font-size:var(--font-size-sm);font-weight:500;cursor:pointer;transition:all .2s ease;margin-bottom:var(--spacing-md)}.sidebar-add-button:hover{background-color:var(--accent-blue-hover)}.sidebar-add-icon{width:20px;height:20px}.sidebar-footer{padding:var(--spacing-md);background-color:var(--bg-secondary)}.storage-info{display:flex;flex-direction:column;gap:var(--spacing-sm)}.storage-info-header{display:flex;align-items:center;gap:var(--spacing-xs);color:var(--text-secondary)}.storage-info-title{font-size:var(--font-size-xs);font-weight:600;text-transform:uppercase;letter-spacing:.05em}.storage-info-bar{width:100%;height:8px;background-color:var(--bg-tertiary);border-radius:4px;overflow:hidden}.storage-info-bar-fill{height:100%;transition:width .3s ease,background-color .3s ease;border-radius:4px}.storage-info-text{font-size:var(--font-size-sm);color:var(--text-primary);font-weight:500}.storage-info-percent{font-size:var(--font-size-xs);color:var(--text-secondary)}.project-filters{margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.project-filter-group{display:flex;flex-direction:column;gap:var(--spacing-xs)}.project-filter-header{display:flex;align-items:center;justify-content:space-between}.project-filter-label{font-size:var(--font-size-xs);font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.project-filters-clear{display:flex;align-items:center;justify-content:center;width:20px;height:20px;padding:0;background-color:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-tertiary);cursor:pointer;transition:all .2s ease}.project-filters-clear:hover{background-color:var(--bg-tertiary);color:var(--text-primary)}.filter-bubbles{display:flex;flex-wrap:wrap;gap:var(--spacing-xs)}.filter-bubble{padding:var(--spacing-xs) var(--spacing-sm);background-color:var(--bg-secondary);border:2px solid var(--border-default);border-radius:20px;font-size:var(--font-size-xs);font-weight:600;color:var(--text-secondary);cursor:pointer;transition:all .2s ease;white-space:nowrap;letter-spacing:.5px}.filter-bubble:hover{border-color:var(--accent-blue);background-color:var(--bg-tertiary);color:var(--text-primary);transform:translateY(-1px)}.filter-bubble.active{background-color:var(--accent-blue);border-color:var(--accent-blue);color:#fff}.filter-bubble.active:hover{background-color:#0056d6;border-color:#0056d6;transform:translateY(-1px)}.project-list{display:flex;flex-direction:column;gap:var(--spacing-xs)}.project-list-empty{padding:var(--spacing-lg);text-align:center;color:var(--text-secondary);font-size:var(--font-size-sm)}.project-item{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background-color:transparent;border:none;border-radius:var(--radius-md);cursor:pointer;transition:background-color .2s ease,transform .12s ease-out;text-align:left;width:100%}.project-item:hover{background-color:var(--bg-tertiary)}.project-item.active{background-color:var(--accent-blue);color:#fff}.project-item-icon{width:24px;height:24px;color:var(--text-secondary);flex-shrink:0}.project-item.active .project-item-icon{color:#fff}.project-item-icon svg{width:100%;height:100%}.project-item-content{flex:1;min-width:0}.project-item-name{font-size:var(--font-size-sm);font-weight:500;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:text}.project-item.active .project-item-name{color:#fff}.project-item-input{width:100%;font-size:var(--font-size-sm);font-weight:500;padding:2px 6px;background-color:#fff;color:#000;border:2px solid var(--accent-blue);border-radius:var(--radius-sm);outline:none;font-family:inherit}.project-item.active .project-item-input{background-color:#fff;color:#000}.project-item-count{font-size:var(--font-size-xs);color:var(--text-secondary);margin-top:2px;display:flex;align-items:center;flex-wrap:wrap;gap:4px}.project-item-size{font-weight:500}.project-item.active .project-item-count{color:#fffc}.project-item-delete{display:flex;align-items:center;justify-content:center;padding:var(--spacing-xs);background-color:transparent;border:none;border-radius:var(--radius-sm);cursor:pointer;opacity:0;transition:all .2s ease;color:var(--text-secondary);flex-shrink:0}.project-item:hover .project-item-delete{opacity:1}.project-item-delete:hover{background-color:#ef44441a;color:#ef4444}.project-item.active .project-item-delete{color:#ffffffb3}.project-item.active .project-item-delete:hover{background-color:#fff3;color:#fff}.project-item{cursor:grab}.project-list.dragging-active .project-item{opacity:.3;transition:opacity .2s ease,background-color .2s ease,transform .12s ease-out}.project-item.dragging{opacity:1!important;cursor:grabbing}.new-project-form{background-color:var(--bg-primary);border-radius:var(--radius-md);padding:var(--spacing-md);border:1px solid var(--border-default)}.new-project-form-header{margin-bottom:var(--spacing-md)}.new-project-form-title{font-size:var(--font-size-base);font-weight:600;color:var(--text-primary);margin:0}.new-project-form-body{margin-bottom:var(--spacing-md)}.new-project-form-label{display:block;font-size:var(--font-size-sm);font-weight:500;color:var(--text-primary);margin-bottom:var(--spacing-xs)}.new-project-form-input{width:100%;padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-sm);font-family:var(--font-family);color:var(--text-primary);background-color:var(--bg-secondary);border:1px solid var(--border-default);border-radius:var(--radius-sm);transition:all .2s ease}.new-project-form-input:focus{outline:none;border-color:var(--accent-blue);background-color:var(--bg-primary)}.new-project-form-input::placeholder{color:var(--text-tertiary)}.new-project-form-footer{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.new-project-form-button{padding:var(--spacing-sm) var(--spacing-md);font-size:var(--font-size-sm);font-weight:500;border-radius:var(--radius-sm);border:none;cursor:pointer;transition:all .2s ease}.new-project-form-button.cancel{background-color:var(--bg-secondary);color:var(--text-primary)}.new-project-form-button.cancel:hover{background-color:var(--bg-tertiary)}.new-project-form-button.submit{background-color:var(--accent-blue);color:#fff}.new-project-form-button.submit:hover:not(:disabled){background-color:var(--accent-blue-hover)}.new-project-form-button.submit:disabled{opacity:.5;cursor:not-allowed}.image-upload{border:2px dashed var(--border-default);border-radius:16px;padding:var(--spacing-2xl) var(--spacing-md);text-align:center;cursor:pointer;background-color:var(--bg-secondary);transition:all .2s ease}.image-upload:hover{border-color:var(--text-secondary);background-color:var(--bg-tertiary)}.image-upload.drag-active{border-color:var(--accent-blue);background-color:var(--bg-tertiary)}.image-upload-icon{width:48px;height:48px;margin:0 auto var(--spacing-md);color:var(--text-tertiary)}.image-upload-text{font-size:var(--font-size-base);color:var(--text-primary);margin-bottom:var(--spacing-xs)}.image-upload-hint{font-size:var(--font-size-sm);color:var(--text-secondary)}.image-upload.drag-active .image-upload-text{color:var(--accent-blue);font-weight:500}.image-upload.uploading{cursor:wait;opacity:.8;pointer-events:none}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.image-upload-icon.spinning{animation:spin 1s linear infinite;color:var(--accent-blue)}.image-upload-compact{display:flex;align-items:center;justify-content:center;width:40px;height:40px;padding:0;background-color:var(--accent-blue);border:none;border-radius:var(--radius-md);color:#fff;cursor:pointer;transition:all .2s ease;flex-shrink:0}.image-upload-compact:hover:not(:disabled){background-color:#0056d6;transform:translateY(-2px);box-shadow:0 4px 12px #007aff4d}.image-upload-compact:active:not(:disabled){transform:translateY(0)}.image-upload-compact:disabled{opacity:.6;cursor:not-allowed}.image-upload-compact.drag-active{background-color:#0056d6;box-shadow:0 0 0 4px #007aff33}.image-upload-compact .spinning{animation:spin 1s linear infinite}.image-gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-md);transform:translateZ(0);will-change:contents}.image-gallery.dragging-active{cursor:grabbing}.image-gallery.dragging-active .image-gallery-item{cursor:grab}.image-gallery.saving{pointer-events:none;opacity:.7}.image-gallery-saving-indicator{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#000000d9;color:#fff;padding:var(--spacing-lg) var(--spacing-xl);border-radius:var(--radius-lg);display:flex;align-items:center;gap:var(--spacing-md);z-index:1000;box-shadow:0 4px 20px #0000004d;font-size:var(--font-size-base);font-weight:500}.saving-spinner{width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}@media(min-width:768px){.image-gallery{grid-template-columns:repeat(3,1fr)}}@media(min-width:1024px){.image-gallery{grid-template-columns:repeat(4,1fr)}}.image-gallery-empty{display:flex;align-items:center;justify-content:center;min-height:calc(100vh - 200px);text-align:center;padding:var(--spacing-2xl) var(--spacing-md);color:var(--text-secondary);font-size:var(--font-size-base)}.image-gallery-item{position:relative;cursor:pointer;overflow:hidden;border-radius:var(--radius-md);border:1px solid var(--border-default);box-shadow:var(--shadow-sm);transition:transform .15s cubic-bezier(.2,0,0,1),border-color .2s ease,box-shadow .2s ease,opacity .15s ease;transform:translateZ(0);backface-visibility:hidden;contain:layout style paint}.image-gallery-item.dragging{opacity:.5;transform:scale(.98) translateZ(0);cursor:grabbing;box-shadow:0 8px 20px #0003}.image-gallery-item.drag-over{border-color:var(--accent-blue);box-shadow:0 0 0 3px #3b82f64d,var(--shadow-md);transform:scale(1.03) translateZ(0)}.image-gallery-item:hover{border-color:var(--accent-blue);box-shadow:var(--shadow-md);transform:translateY(-2px) translateZ(0)}.image-gallery-item img{width:100%;height:200px;object-fit:cover;display:block;transition:transform .2s ease}.image-gallery-item:hover img{transform:scale(1.05) translateZ(0)}.image-gallery-item-name{position:absolute;bottom:0;left:0;right:0;background-color:#000000b3;color:#fff;padding:var(--spacing-sm);font-size:var(--font-size-xs);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:0;transition:opacity .2s ease}.image-gallery-item:hover .image-gallery-item-name{opacity:1}.image-gallery-item-actions{position:absolute;top:var(--spacing-xs);right:var(--spacing-xs);display:flex;gap:var(--spacing-xs);z-index:10;opacity:0;transition:opacity .2s ease}.image-gallery-item:hover .image-gallery-item-actions{opacity:1}.image-gallery-item-action{display:flex;align-items:center;justify-content:center;width:32px;height:32px;padding:var(--spacing-xs);background-color:#ffffffe6;border:none;border-radius:var(--radius-sm);cursor:pointer;transition:transform .2s ease,background-color .2s ease,color .2s ease;color:var(--text-secondary);box-shadow:0 2px 8px #00000026}.image-gallery-item-action:hover{background-color:#fff;color:var(--text-primary);transform:scale(1.1)}.image-gallery-item-action.image-gallery-item-delete:hover{background-color:#ef4444;color:#fff}.lazy-image-container{width:100%;height:200px;position:relative;display:flex;align-items:center;justify-content:center;background-color:var(--bg-tertiary)}.lazy-image-placeholder{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}.lazy-image-spinner{width:40px;height:40px;border:3px solid var(--border-light);border-top-color:var(--accent-blue);border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.lazy-image-loading{opacity:0;transition:opacity .3s ease}.lazy-image-loaded{opacity:1;transition:opacity .3s ease}.lazy-image-container img{width:100%;height:200px;object-fit:cover;display:block}.theme-toggle{display:inline-flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);border-radius:999px;background-color:var(--bg-secondary);border:1px solid var(--border-light);cursor:pointer;transition:all .2s ease}.theme-toggle:hover{background-color:var(--bg-tertiary)}.theme-toggle-icon{width:20px;height:20px;transition:color .2s ease}.theme-toggle-icon.sun,.theme-toggle-icon.moon{color:var(--text-tertiary)}.theme-toggle-icon.active{color:var(--accent-blue)}.modal-overlay{position:fixed;inset:0;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:fadeIn .2s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background-color:var(--bg-primary);border-radius:var(--radius-lg);padding:var(--spacing-xl);max-width:420px;width:90%;box-shadow:0 20px 60px #0000004d;animation:slideUp .2s ease}@keyframes slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-title{font-size:var(--font-size-xl);font-weight:600;color:var(--text-primary);margin:0 0 var(--spacing-md);text-align:center}.modal-message{font-size:var(--font-size-base);color:var(--text-secondary);margin:0 0 var(--spacing-xl);text-align:center;line-height:1.5}.modal-actions{display:flex;gap:var(--spacing-md);justify-content:center}.modal-button{padding:var(--spacing-sm) var(--spacing-xl);border-radius:var(--radius-md);font-size:var(--font-size-base);font-weight:500;cursor:pointer;transition:all .2s ease;border:none;min-width:120px}.modal-button-cancel{background-color:var(--bg-tertiary);color:var(--text-primary)}.modal-button-cancel:hover{background-color:var(--bg-secondary)}.modal-button-cancel:focus{outline:2px solid var(--accent-blue);outline-offset:2px}.modal-button-danger{background-color:#ef4444;color:#fff}.modal-button-danger:hover{background-color:#dc2626}.modal-button-danger:focus{outline:2px solid #ef4444;outline-offset:2px}.city-selection-modal{max-width:500px}.city-selection-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-md);margin-bottom:var(--spacing-xl)}.city-selection-button{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-lg);background-color:var(--bg-secondary);border:2px solid var(--bg-tertiary);border-radius:var(--radius-md);cursor:pointer;transition:all .2s ease;min-height:80px}.city-selection-button:hover{background-color:var(--bg-tertiary);border-color:var(--accent-blue);transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.city-selection-button:active{transform:translateY(0)}.city-selection-button:focus{outline:2px solid var(--accent-blue);outline-offset:2px}.city-abbreviation{font-size:var(--font-size-xl);font-weight:700;color:var(--accent-blue);letter-spacing:.5px;margin-bottom:var(--spacing-xs)}.city-name{font-size:var(--font-size-sm);font-weight:500;color:var(--text-secondary)}.project-type-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-md);margin-bottom:var(--spacing-xl)}.project-type-button{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-lg);background-color:var(--bg-secondary);border:2px solid var(--bg-tertiary);border-radius:var(--radius-md);cursor:pointer;transition:all .2s ease;min-height:80px}.project-type-button:hover{background-color:var(--bg-tertiary);border-color:var(--accent-blue);transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.project-type-button:active{transform:translateY(0)}.project-type-button:focus{outline:2px solid var(--accent-blue);outline-offset:2px}.project-type-abbreviation{font-size:var(--font-size-xl);font-weight:700;color:var(--accent-blue);letter-spacing:.5px;margin-bottom:var(--spacing-xs)}.project-type-name{font-size:var(--font-size-sm);font-weight:500;color:var(--text-secondary);text-align:center}.project-name-form{width:100%}.project-name-input-wrapper{display:flex;align-items:center;background-color:var(--bg-secondary);border:2px solid var(--bg-tertiary);border-radius:var(--radius-md);padding:var(--spacing-sm) var(--spacing-md);margin-bottom:var(--spacing-xl);transition:border-color .2s ease}.project-name-input-wrapper:focus-within{border-color:var(--accent-blue);background-color:var(--bg-primary)}.project-name-prefix{font-size:var(--font-size-base);font-weight:600;color:var(--accent-blue);white-space:nowrap;-webkit-user-select:none;user-select:none;pointer-events:none}.project-name-input{flex:1;border:none;background:transparent;font-size:var(--font-size-base);color:var(--text-primary);outline:none;padding:0;margin-left:2px}.project-name-input::placeholder{color:var(--text-tertiary);opacity:.6}.modal-button-primary{background-color:var(--accent-blue);color:#fff}.modal-button-primary:hover:not(:disabled){background-color:#0056d6}.modal-button-primary:disabled{opacity:.5;cursor:not-allowed}
