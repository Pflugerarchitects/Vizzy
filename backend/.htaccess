# Apache Configuration for Vizzy Backend

# Enable RewriteEngine
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Don't rewrite for existing files or directories
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
</IfModule>

# Security: Prevent access to config.php
<Files "config.php">
    Require all denied
</Files>

# Security: Prevent directory listing
Options -Indexes

# CORS is handled by PHP (utils.php setCORSHeaders function)
# Commenting out .htaccess CORS to avoid duplicate headers
#<IfModule mod_headers.c>
#    SetEnvIf Origin "^http(s)?://(localhost:5173|localhost:5174|localhost:5175)$" origin_is=$0
#    SetEnvIf Origin "^https://vizzy\.pflugerarchitects\.com$" origin_is=$0
#    Header set Access-Control-Allow-Origin "%{origin_is}e" env=origin_is
#
#    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
#    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
#    Header set Access-Control-Allow-Credentials "true"
#</IfModule>

# File Upload Settings
php_value upload_max_filesize 20M
php_value post_max_size 25M
php_value max_execution_time 300
php_value max_input_time 300

# Error handling
php_flag display_errors On
php_flag display_startup_errors On
php_value error_reporting E_ALL
